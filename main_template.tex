%!LW recipe=xelatex -> bibtex -> xelatex * 2
%!TEX encoding = utf8

\documentclass[10pt]{beamer}

% ---------------------------------------------------------------------------- %
%   a. Beamer Template                                                         %
% ---------------------------------------------------------------------------- %

\usepackage{template/beamerthemegeoslides}

% ---------------------------------------------------------------------------- %
%   b. General Utility Packages                                                %
% ---------------------------------------------------------------------------- %

% Babel dictionaries, include the languages I use in the paper
\usepackage[main=british]{babel}

% Define Dates
\usepackage[en-GB]{datetime2}

% emoji
\usepackage{twemojis}

% ---------------------------------------------------------------------------- %
%   c. Personal Data and User Ad-Hoc Commands                                  %
% ---------------------------------------------------------------------------- %

% ------------------------------------------------------------------
% Small snippet of code that allows to assign the correct pathname for the
% references directory when using my local system instead of Overleaf when
% when working with others. We also insert a quick hack for cross-referencing
% external documents in overleaf, otherwise the xr package breaks.
% https://tex.stackexchange.com/questions/107864/ifusername-foo-else-fi

\usepackage{ifplatform}
\usepackage{catchfile}

% Identify the username of the local system
\ifwindows
    \CatchFileEdef{\usrtest}{"|PowerShell.exe echo $Env:UserName"}{\endlinechar=-1 }
\else
    \CatchFileEdef{\usrtest}{"|kpsewhich -var-value USER"}{\endlinechar=-1 }
\fi

% specify your username locally
\def\me{alepi}

\ifx\me\usrtest
    \newcommand*{\RefsPath}{./references}
\else
    \newcommand*{\RefsPath}{./references}
\fi


% Setup Frame Title Continuation
\setbeamertemplate{frametitle continuation}[from second][(contd.)]
% \addtobeamertemplate{frametitle continuation}{(}{)}

% relative pathnames for figures and tables
\graphicspath{ {../../out/graphs/}{./figures/} } % Figures Path
\newcommand*{\TablesPath}{../../out/tables/}
\makeatletter
\newcommand*\ExpandableInput[1]{\@@input#1 }
\makeatother

% change label format to simple or parens from empty to have numbers
\captionsetup[figure]{%
    justification=justified, skip=0pt, labelformat=simple,%
    font={singlespacing,scriptsize}, position=top%
}%
\captionsetup[table]{%
    justification=justified, skip=0pt, labelformat=simple,%
    font={singlespacing,scriptsize}, position=top%
}%
\captionsetup[subfloat]{%
    justification=centering, skip=0pt, labelformat=simple, position=top,%
    textfont={singlespacing,footnotesize}%
}%

% High-Res Pictures Option
\DeclareGraphicsExtensions{.pdf, .png}

\let\oldcite=\cite
\let\oldcitet=\citet
\let\oldcitep=\citep
\let\oldcitealp=\citealp
\renewcommand{\citet}[2][]{\textcolor{grayku}{\oldcitet[#1]{#2}}}
\renewcommand{\citep}[2][]{\textcolor{grayku}{\oldcitep[#1]{#2}}}
\renewcommand{\citealp}[2][]{\textcolor{grayku}{\oldcitealp[#1]{#2}}}
\renewcommand{\cite}[2][]{\textcolor{grayku}{\oldcite[#1]{#2}}}

% Master slide definitions
\title[Main Title Footer] % (optional, only for long titles)
{A Very interesting Title}
\subtitle{A Very interesting (optional) subtitle}
\author[First~Author (Presenter)]% (optional, for multiple authors)
{First~Author\inst{1} \and Second~Author\inst{2}}
\institute[] % (optional)
{%
  \inst{1}%
  University of the Black Metal
  \and
  \inst{2}%
  University of the Shoegaze
}%

\date[Place/Conference Topic]% (optional)
{Department of Whatever \\[0.1em]
Institution\\[1em]
\DTMdate{2023-01-01}}
\subject{Presentation}

%----------------------------------------------------------------------------- %
%   PRESENTATION BODY                                                          %
%----------------------------------------------------------------------------- %

\begin{document}

%----------------------------------------------------------------------------- %
%   TITLE SLIDE                                                                %
%----------------------------------------------------------------------------- %

\begin{frame}[plain]
    \titlepage
    \frontlogo
\end{frame}

%----------------------------------------------------------------------------- %
%   INTRODUCTION                                                               %
%----------------------------------------------------------------------------- %

% --------------------------------------------------------------
\section*{Introduction}
% --------------------------------------------------------------

% --------------------------------------------------------------

\begin{frame}{Introduction}{A Smart subtitle}

    \citet[p. 385]{bib:becker1993}:\\

    \begin{displayquote}
        ``The economic approach is a method of analysis, not an assumption of particular motivations. [...] The analysis assumes that individuals maximize welfare as they conceive it, whether they be selfish, altruistic, loyal, spiteful, or masochistic. Their behaviour is forward-looking, and it is also assumed to be consistent over time. In particular, they try as best they can to anticipate the uncertain consequences of their actions. Forward-looking behaviour, however, may still be rooted in the past, for the past can exert long shadows on attitudes and values.''
    \end{displayquote}

\end{frame}


%----------------------------------------------------------------------------- %
%   FULL OUTLINE                                                               %
%----------------------------------------------------------------------------- %

\begin{frame}{Outline}
    \tableofcontents
\end{frame}


% THANK YOU SLIDE --------------------------------------------------------------
\begin{frame}
    \centering
    \begin{LARGE}Thank you!\end{LARGE}

    \vspace{1em}

    \begin{Large}\href{mailto:your@email.com}{your@email.com}\end{Large}

\end{frame}

%----------------------------------------------------------------------------- %
%   REFERENCES                                                                 %
%----------------------------------------------------------------------------- %

% workaround to hide natbib bibliography keeping the citations
% make a frame with allowframebreaks if you want to keep them otherwise
\newsavebox\mytempbib
\bibliographystyle{\RefsPath/aea}
\savebox\mytempbib{\parbox{\textwidth}{\bibliography{\RefsPath/references}}}

%----------------------------------------------------------------------------- %
%   BACKUP SLIDES                                                              %
%----------------------------------------------------------------------------- %

% --------------------------------------------------------------
\section*{Appendix}
% --------------------------------------------------------------

\appendix
\backupbegin

% Backup Slides Title Page
\begin{frame}
  \centering
  \begin{LARGE}Backup Slides\end{LARGE}
\end{frame}

\backupend

% --------------------------------------------------------------
%     You don't have to mess with anything below this line.
% --------------------------------------------------------------

\end{document}
